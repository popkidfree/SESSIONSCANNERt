<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>POPKID-XTR PAIR CODE</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#00f7ff;
  --accent2:#ff00c8;
  --accent3:#7dff00;
  --text:#eaffff;
  --glass:rgba(10,15,30,.75);
}

/* base */
*{box-sizing:border-box;margin:0;padding:0}

html,body{
  height:100%;
  font-family:'Orbitron',sans-serif;
  color:var(--text);
  background:#02040a;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* thunderstorm animated sky */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 30% 20%, rgba(0,255,255,.25), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(255,0,200,.2), transparent 40%),
    linear-gradient(#02040a,#000);
  animation:stormGlow 6s ease-in-out infinite;
  pointer-events:none;
  z-index:0;
}

@keyframes stormGlow{
  0%,100%{opacity:.7}
  50%{opacity:1}
}

/* lightning flash */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:linear-gradient(120deg, transparent, rgba(255,255,255,.7), transparent);
  opacity:0;
  animation:lightning 5s infinite;
  pointer-events:none;
  z-index:0;
}

@keyframes lightning{
  0%,92%,100%{opacity:0}
  93%{opacity:1}
  94%{opacity:0}
  96%{opacity:.8}
  97%{opacity:0}
}

/* main frame */
.frame{
  position:relative;
  z-index:5;
  width:360px;
  padding:38px 30px;
  border-radius:18px;
  background:var(--glass);
  backdrop-filter:blur(18px) saturate(180%);
  border:1px solid rgba(0,255,255,.25);
  text-align:center;
  box-shadow:
    0 0 25px rgba(0,255,255,.3),
    0 0 40px rgba(255,0,200,.2);
}

/* neon border */
.frame::before{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius:18px;
  background:linear-gradient(45deg,var(--accent),var(--accent2),var(--accent3),var(--accent));
  background-size:300% 300%;
  animation:borderMove 6s linear infinite;
  filter:blur(10px);
  opacity:.6;
  z-index:-1;
}

@keyframes borderMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* title */
.title{
  font-family:'Share Tech Mono',monospace;
  font-size:1.4rem;
  margin-bottom:22px;
  color:var(--accent);
  text-shadow:0 0 15px var(--accent);
  letter-spacing:1px;
}

/* input area */
.input-container{
  display:flex;
  gap:12px;
  margin-bottom:18px;
}

.input-container input{
  flex:1;
  padding:13px;
  border-radius:10px;
  border:1px solid rgba(0,255,255,.4);
  background:rgba(255,255,255,.05);
  color:var(--text);
  font-family:'Share Tech Mono',monospace;
  outline:none;
  font-size:.95rem;
  transition:.3s;
}

.input-container input:focus{
  border-color:var(--accent);
  box-shadow:0 0 16px var(--accent);
}

/* stylish action button */
.input-container button{
  padding:12px 18px;
  border:none;
  border-radius:50px;
  font-weight:bold;
  cursor:pointer;
  color:#fff;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  box-shadow:
    0 0 15px rgba(0,255,255,.6),
    0 0 25px rgba(255,0,200,.4);
  transition:.25s;
}

.input-container button:hover{
  transform:translateY(-2px) scale(1.05);
  box-shadow:
    0 0 25px rgba(0,255,255,.9),
    0 0 40px rgba(255,0,200,.6);
}

/* terminal box */
#waiting-message{
  display:none;
  text-align:left;
  font-family:'Share Tech Mono',monospace;
  background:rgba(0,0,0,.6);
  padding:12px;
  border-radius:8px;
  font-size:.95rem;
  border:1px solid rgba(0,255,255,.25);
}

/* copy button */
#copy-btn{
  display:none;
  margin-top:16px;
  padding:11px 20px;
  border-radius:50px;
  border:none;
  cursor:pointer;
  font-weight:bold;
  color:#fff;
  background:linear-gradient(135deg,#00ff99,#00cc66);
  box-shadow:0 0 16px rgba(0,255,150,.7);
  transition:.25s;
}

#copy-btn:hover{
  transform:scale(1.06);
  box-shadow:0 0 24px rgba(0,255,150,.95);
}
</style>
</head>

<body>

<div class="frame">
  <p class="title">POPKID-XTR PAIR SITE</p>

  <div class="input-container">
    <input placeholder="Enter WhatsApp Number" type="tel" id="number">
    <button id="submit">‚ö° GENERATE</button>
  </div>

  <p id="waiting-message">Please Wait...</p>
  <button id="copy-btn">üìã Copy Code</button>
</div>

<script>
const msg = document.getElementById("waiting-message");
const submitBtn = document.getElementById("submit");
const numberInput = document.getElementById("number");
const copyBtn = document.getElementById("copy-btn");

submitBtn.addEventListener("click", async (e) => {
  e.preventDefault();

  const value = numberInput.value.replace(/[^0-9]/g, "");

  if (!value) {
    msg.innerText = "‚ö† Enter your WhatsApp number with Country Code";
    msg.style.display = "block";
    copyBtn.style.display = "none";
    return;
  }

  if (value.length < 11) {
    msg.innerText = "‚ùå Invalid Number";
    msg.style.display = "block";
    copyBtn.style.display = "none";
    return;
  }

  msg.innerText = "‚è≥ Generating Code...";
  msg.style.display = "block";

  try {
    const res = await fetch(`/code?number=${value}`);
    const data = await res.json();
    const code = data.code || "Service Unavailable";

    msg.innerText = "‚úÖ CODE: " + code;
    copyBtn.style.display = "inline-block";

    copyBtn.onclick = () => {
      navigator.clipboard.writeText(code);
      copyBtn.innerText = "‚úî Copied!";
      setTimeout(() => copyBtn.innerText = "üìã Copy Code", 2000);
    };

  } catch (err) {
    msg.innerText = "‚ùå Error fetching code.";
    copyBtn.style.display = "none";
  }
});
</script>

</body>
</html>
